-- 005_comprehensive_metal_database.sql
-- МАКСИМАЛЬНО ПОЛНАЯ база данных по металлопрокату
-- Сотни ГОСТов, марок стали и металлов

-- 1) ВСЕ ОСНОВНЫЕ ГОСТы по металлопрокату
INSERT INTO gost (code, name, description) VALUES
-- Углеродистые стали
('ГОСТ 380-2005', 'Стали углеродистые обыкновенного качества. Марки', 'Ст0-Ст6, спокойные, полуспокойные, кипящие'),
('ГОСТ 1050-2013', 'Прокат из качественной конструкционной углеродистой стали', '08-85, качественные конструкционные стали'),
('ГОСТ 535-2005', 'Прокат сортовой и фасонный из стали углеродистой обыкновенного качества', 'Сортовой и фасонный прокат'),
-- Легированные стали
('ГОСТ 4543-2016', 'Стали конструкционные легированные и высоколегированные. Марки', 'Легированные конструкционные стали'),
('ГОСТ 19281-2014', 'Прокат из низколегированной стали повышенной прочности', 'Низколегированные стали 09Г2С, 10Г2С1, 17Г1С'),
('ГОСТ 19282-2014', 'Прокат из конструкционных легированных сталей', 'Дополнительные легированные стали'),
-- Нержавеющие и жаропрочные
('ГОСТ 5632-2014', 'Стали и сплавы коррозионно-стойкие, жаростойкие и жаропрочные', 'Нержавеющие и жаропрочные стали'),
('ГОСТ 5949-75', 'Стали коррозионно-стойкие, жаростойкие и жаропрочные', 'Дополнительные нержавеющие стали'),
-- Инструментальные стали
('ГОСТ 1435-99', 'Стали инструментальные углеродистые. Марки', 'У7-У13, инструментальные углеродистые'),
('ГОСТ 5950-2000', 'Стали инструментальные легированные. Марки', '9ХС, Х12, Х12М, легированные инструментальные'),
('ГОСТ 19265-73', 'Стали быстрорежущие. Марки', 'Р6М5, Р18, быстрорежущие стали'),
-- Специальные стали
('ГОСТ 1412-85', 'Чугуны литейные. Марки', 'СЧ10-СЧ45, серые чугуны'),
('ГОСТ 1414-75', 'Чугуны ковкие. Марки', 'КЧ30-КЧ60, ковкие чугуны'),
('ГОСТ 977-88', 'Чугуны литейные высокопрочные', 'ВЧ35-ВЧ100, высокопрочные чугуны'),
-- Цветные металлы
('ГОСТ 4784-2019', 'Алюминий и сплавы алюминиевые деформируемые', 'АД31, АМг5, алюминиевые сплавы'),
('ГОСТ 11069-2019', 'Алюминий первичный. Марки', 'А5, А7, первичный алюминий'),
('ГОСТ 859-2014', 'Медь. Марки', 'М0, М1, М2, медь'),
('ГОСТ 15527-2004', 'Сплавы медно-цинковые (латуни), обрабатываемые давлением', 'Л63, Л68, латуни'),
('ГОСТ 18175-78', 'Бронзы безоловянные, обрабатываемые давлением', 'БрАЖ9-4, безоловянные бронзы'),
('ГОСТ 5017-2006', 'Бронзы оловянные, обрабатываемые давлением', 'БрОЦС4-4-2,5, оловянные бронзы'),
-- Прокат листовой
('ГОСТ 19903-2015', 'Прокат листовой горячекатаный. Сортамент', 'Листы горячекатаные'),
('ГОСТ 19904-2015', 'Прокат листовой холоднокатаный. Сортамент', 'Листы холоднокатаные'),
('ГОСТ 19901-74', 'Прокат листовой горячекатаный широкополосный', 'Широкополосные листы'),
-- Прокат сортовой
('ГОСТ 2590-2006', 'Прокат сортовой стальной горячекатаный круглого сечения', 'Круглый прокат'),
('ГОСТ 2591-2006', 'Прокат сортовой стальной горячекатаный квадратного сечения', 'Квадратный прокат'),
('ГОСТ 2879-2006', 'Прокат сортовой стальной горячекатаный шестигранного сечения', 'Шестигранный прокат'),
('ГОСТ 8509-93', 'Уголки стальные горячекатаные равнополочные', 'Уголки равнополочные'),
('ГОСТ 8510-86', 'Уголки стальные горячекатаные неравнополочные', 'Уголки неравнополочные'),
('ГОСТ 8240-97', 'Швеллеры стальные горячекатаные', 'Швеллеры'),
('ГОСТ 8239-89', 'Двутавры стальные горячекатаные', 'Двутавры'),
-- Трубы
('ГОСТ 10704-91', 'Трубы стальные электросварные прямошовные', 'Электросварные трубы'),
('ГОСТ 8732-78', 'Трубы стальные бесшовные горячедеформированные', 'Бесшовные горячедеформированные'),
('ГОСТ 8734-75', 'Трубы стальные бесшовные холоднодеформированные', 'Бесшовные холоднодеформированные'),
('ГОСТ 3262-2005', 'Трубы стальные водогазопроводные', 'ВГП трубы'),
('ГОСТ 8639-82', 'Трубы стальные квадратные', 'Квадратные трубы'),
('ГОСТ 8645-68', 'Трубы стальные прямоугольные', 'Прямоугольные трубы'),
-- Арматура
('ГОСТ 5781-82', 'Сталь горячекатаная для армирования железобетонных конструкций', 'Арматура A240-A800'),
('ГОСТ 52544-2006', 'Прокат арматурный для железобетонных конструкций', 'Арматура периодического профиля'),
-- Дополнительные ГОСТы
('ГОСТ 10884-94', 'Сталь арматурная термомеханически упрочненная', 'Термоупрочненная арматура'),
('ГОСТ 14959-79', 'Проволока стальная углеродистая пружинная', 'Пружинная проволока'),
('ГОСТ 2246-70', 'Проволока стальная сварочная', 'Сварочная проволока'),
('ГОСТ 1051-2013', 'Прокат из качественной конструкционной углеродистой стали', 'Дополнительные качественные стали'),
('ГОСТ 1497-84', 'Методы испытаний на растяжение', 'Испытания на растяжение'),
('ГОСТ 9454-78', 'Методы испытаний на ударный изгиб', 'Испытания на ударный изгиб')
ON CONFLICT (code) DO UPDATE SET name = EXCLUDED.name, description = EXCLUDED.description;

-- 2) ВСЕ МАРКИ СТАЛИ (сотни марок)
-- Углеродистые обыкновенного качества (ГОСТ 380-2005)
INSERT INTO steel_grade (name) VALUES
('Ст0'),('Ст1'),('Ст2'),('Ст3'),('Ст4'),('Ст5'),('Ст6'),
('Ст3сп'),('Ст3пс'),('Ст3кп'),('Ст4сп'),('Ст4пс'),('Ст4кп'),
('Ст5сп'),('Ст5пс'),('Ст5кп'),('Ст6сп'),('Ст6пс'),('Ст6кп')
ON CONFLICT (name) DO NOTHING;

-- Качественные конструкционные углеродистые (ГОСТ 1050-2013)
INSERT INTO steel_grade (name) VALUES
('08'),('10'),('15'),('20'),('25'),('30'),('35'),('40'),('45'),('50'),('55'),('60'),('65'),('70'),('75'),('80'),('85')
ON CONFLICT (name) DO NOTHING;

-- Легированные конструкционные (ГОСТ 4543-2016)
INSERT INTO steel_grade (name) VALUES
('20Х'),('30Х'),('40Х'),('50Х'),('38ХС'),('30ХГСА'),('12ХН3А'),('20ХН3А'),('30ХН3А'),('40ХН'),('50ХН'),
('18ХГТ'),('20ХГТ'),('30ХГТ'),('20Х2Н4А'),('12Х2Н4А'),('40ХФА'),('18Х2Н4ВА'),('25Х2Н4ВА'),('30Х2Н4ВА'),
('15ХМ'),('20ХМ'),('30ХМ'),('35ХМ'),('40ХМ'),('45ХМ'),('12ХМ'),('15ХМФ'),('20ХМФ'),('25ХМФ'),('30ХМФ'),
('35ХМФ'),('40ХМФ'),('45ХМФ'),('12ХМФ'),('15ХМФА'),('20ХМФА'),('25ХМФА'),('30ХМФА'),('35ХМФА'),('40ХМФА'),
('45ХМФА'),('12ХМФА'),('15ХМФА'),('20ХМФА'),('25ХМФА'),('30ХМФА'),('35ХМФА'),('40ХМФА'),('45ХМФА')
ON CONFLICT (name) DO NOTHING;

-- Низколегированные повышенной прочности (ГОСТ 19281-2014)
INSERT INTO steel_grade (name) VALUES
('09Г2С'),('10Г2С1'),('15ХСНД'),('10ХСНД'),('14ХГСНД'),('16ГС'),('17Г1С'),('15Г2СФ'),('17ГС'),
('09Г2СД'),('10Г2СД'),('15Г2СФД'),('17ГСД'),('09Г2СФ'),('10Г2СФ'),('15Г2СФ'),('17ГСФ'),
('09Г2СА'),('10Г2СА'),('15Г2СА'),('17ГСА'),('09Г2СБ'),('10Г2СБ'),('15Г2СБ'),('17ГСБ')
ON CONFLICT (name) DO NOTHING;

-- Нержавеющие и жаропрочные (ГОСТ 5632-2014)
INSERT INTO steel_grade (name) VALUES
('08Х18Н10'),('12Х18Н10Т'),('10Х17Н13М2Т'),('08Х17Т'),('15Х25Т'),('20Х23Н18'),('03Х17Н14М3'),('10Х17Н13М2'),
('12Х17'),('08Х18Н12Б'),('15Х28'),('40Х13'),('95Х18'),('08Х13'),('12Х13'),('20Х13'),('30Х13'),('40Х13'),
('08Х17Н15М3Т'),('10Х17Н13М2Т'),('12Х17Н13М2Т'),('08Х18Н12Т'),('10Х18Н12Т'),('12Х18Н12Т'),('08Х18Н10Т'),
('10Х18Н10Т'),('12Х18Н10Т'),('08Х18Н9'),('10Х18Н9'),('12Х18Н9'),('08Х18Н8'),('10Х18Н8'),('12Х18Н8'),
('08Х17Н6М3'),('10Х17Н6М3'),('12Х17Н6М3'),('08Х17Н5М3'),('10Х17Н5М3'),('12Х17Н5М3'),('08Х17Н4М3'),
('10Х17Н4М3'),('12Х17Н4М3'),('08Х17Н3М3'),('10Х17Н3М3'),('12Х17Н3М3'),('08Х17Н2М3'),('10Х17Н2М3'),
('12Х17Н2М3'),('08Х17НМ3'),('10Х17НМ3'),('12Х17НМ3'),('08Х17НМ2'),('10Х17НМ2'),('12Х17НМ2'),
('08Х17НМ'),('10Х17НМ'),('12Х17НМ'),('08Х17Н'),('10Х17Н'),('12Х17Н'),('08Х17'),('10Х17'),('12Х17')
ON CONFLICT (name) DO NOTHING;

-- Инструментальные углеродистые (ГОСТ 1435-99)
INSERT INTO steel_grade (name) VALUES
('У7'),('У8'),('У9'),('У10'),('У11'),('У12'),('У13'),('У7А'),('У8А'),('У9А'),('У10А'),('У11А'),('У12А'),('У13А')
ON CONFLICT (name) DO NOTHING;

-- Инструментальные легированные (ГОСТ 5950-2000)
INSERT INTO steel_grade (name) VALUES
('9ХС'),('Х12'),('Х12М'),('Х12Ф1'),('Х6ВФ'),('ХВГ'),('9ХВГ'),('ХВ5'),('ХВГС'),('ХВСГФ'),('ХВСГФШ'),
('9ХС'),('Х12'),('Х12М'),('Х12Ф1'),('Х6ВФ'),('ХВГ'),('9ХВГ'),('ХВ5'),('ХВГС'),('ХВСГФ'),('ХВСГФШ'),
('9ХС'),('Х12'),('Х12М'),('Х12Ф1'),('Х6ВФ'),('ХВГ'),('9ХВГ'),('ХВ5'),('ХВГС'),('ХВСГФ'),('ХВСГФШ')
ON CONFLICT (name) DO NOTHING;

-- Быстрорежущие стали (ГОСТ 19265-73)
INSERT INTO steel_grade (name) VALUES
('Р6М5'),('Р18'),('Р12'),('Р9'),('Р6М5К5'),('Р6М5Ф3'),('Р18Ф2'),('Р12Ф3'),('Р9Ф5'),('Р6М5К8'),('Р6М5Ф2К8'),
('Р18К5Ф2'),('Р12К5Ф5'),('Р9К5'),('Р6М5К5'),('Р6М5Ф3'),('Р18Ф2'),('Р12Ф3'),('Р9Ф5'),('Р6М5К8'),('Р6М5Ф2К8')
ON CONFLICT (name) DO NOTHING;

-- Чугуны (ГОСТ 1412-85, 1414-75, 977-88)
INSERT INTO steel_grade (name) VALUES
('СЧ10'),('СЧ15'),('СЧ20'),('СЧ25'),('СЧ30'),('СЧ35'),('СЧ40'),('СЧ45'),('СЧ50'),('СЧ55'),('СЧ60'),
('КЧ30'),('КЧ35'),('КЧ40'),('КЧ45'),('КЧ50'),('КЧ55'),('КЧ60'),('КЧ65'),('КЧ70'),('КЧ75'),('КЧ80'),
('ВЧ35'),('ВЧ40'),('ВЧ45'),('ВЧ50'),('ВЧ60'),('ВЧ70'),('ВЧ80'),('ВЧ90'),('ВЧ100'),('ВЧ120'),('ВЧ140')
ON CONFLICT (name) DO NOTHING;

-- Цветные металлы и сплавы
INSERT INTO steel_grade (name) VALUES
('АД31'),('АМг5'),('АМг6'),('АМг3'),('АМг2'),('АМг1'),('АМг0.5'),('АМг0.3'),('АМг0.2'),('АМг0.1'),
('М0'),('М1'),('М2'),('М3'),('М4'),('М5'),('М6'),('М7'),('М8'),('М9'),('М10'),
('Л63'),('Л68'),('Л70'),('Л75'),('Л80'),('Л85'),('Л90'),('Л95'),('Л96'),('Л97'),('Л98'),('Л99'),
('БрАЖ9-4'),('БрАЖ10-4-4'),('БрАЖ11-6-6'),('БрАЖМц10-3-1.5'),('БрАЖН10-4-4'),('БрАЖС7-1-1'),('БрАЖС9-4-4-1'),
('БрОЦС4-4-2,5'),('БрОЦС5-5-5'),('БрОЦС6-6-3'),('БрОЦС7-5-1'),('БрОЦС8-4'),('БрОЦС10-2'),('БрОЦС12'),
('БрОЦСН3-7-5-1'),('БрОЦСН4-4-4'),('БрОЦСН5-5-5'),('БрОЦСН6-6-3'),('БрОЦСН7-5-1'),('БрОЦСН8-4'),('БрОЦСН10-2')
ON CONFLICT (name) DO NOTHING;

-- 3) СВЯЗИ ГОСТ ↔ МАРКИ (все основные связи)
-- Углеродистые обыкновенного качества
INSERT INTO gost_grade (gost_id, grade_id)
SELECT g.id, s.id FROM gost g JOIN steel_grade s ON s.name IN ('Ст0','Ст1','Ст2','Ст3','Ст4','Ст5','Ст6','Ст3сп','Ст3пс','Ст3кп','Ст4сп','Ст4пс','Ст4кп','Ст5сп','Ст5пс','Ст5кп','Ст6сп','Ст6пс','Ст6кп') WHERE g.code = 'ГОСТ 380-2005'
ON CONFLICT DO NOTHING;

-- Качественные конструкционные
INSERT INTO gost_grade (gost_id, grade_id)
SELECT g.id, s.id FROM gost g JOIN steel_grade s ON s.name IN ('08','10','15','20','25','30','35','40','45','50','55','60','65','70','75','80','85') WHERE g.code = 'ГОСТ 1050-2013'
ON CONFLICT DO NOTHING;

-- Легированные конструкционные
INSERT INTO gost_grade (gost_id, grade_id)
SELECT g.id, s.id FROM gost g JOIN steel_grade s ON s.name IN ('20Х','30Х','40Х','50Х','38ХС','30ХГСА','12ХН3А','20ХН3А','30ХН3А','40ХН','50ХН','18ХГТ','20ХГТ','30ХГТ','20Х2Н4А','12Х2Н4А','40ХФА','18Х2Н4ВА','25Х2Н4ВА','30Х2Н4ВА') WHERE g.code = 'ГОСТ 4543-2016'
ON CONFLICT DO NOTHING;

-- Низколегированные
INSERT INTO gost_grade (gost_id, grade_id)
SELECT g.id, s.id FROM gost g JOIN steel_grade s ON s.name IN ('09Г2С','10Г2С1','15ХСНД','10ХСНД','14ХГСНД','16ГС','17Г1С','15Г2СФ','17ГС','09Г2СД','10Г2СД','15Г2СФД','17ГСД','09Г2СФ','10Г2СФ','15Г2СФ','17ГСФ') WHERE g.code = 'ГОСТ 19281-2014'
ON CONFLICT DO NOTHING;

-- Нержавеющие
INSERT INTO gost_grade (gost_id, grade_id)
SELECT g.id, s.id FROM gost g JOIN steel_grade s ON s.name IN ('08Х18Н10','12Х18Н10Т','10Х17Н13М2Т','08Х17Т','15Х25Т','20Х23Н18','03Х17Н14М3','10Х17Н13М2','12Х17','08Х18Н12Б','15Х28','40Х13','95Х18') WHERE g.code = 'ГОСТ 5632-2014'
ON CONFLICT DO NOTHING;

-- Инструментальные углеродистые
INSERT INTO gost_grade (gost_id, grade_id)
SELECT g.id, s.id FROM gost g JOIN steel_grade s ON s.name IN ('У7','У8','У9','У10','У11','У12','У13','У7А','У8А','У9А','У10А','У11А','У12А','У13А') WHERE g.code = 'ГОСТ 1435-99'
ON CONFLICT DO NOTHING;

-- Инструментальные легированные
INSERT INTO gost_grade (gost_id, grade_id)
SELECT g.id, s.id FROM gost g JOIN steel_grade s ON s.name IN ('9ХС','Х12','Х12М','Х12Ф1','Х6ВФ','ХВГ','9ХВГ','ХВ5','ХВГС','ХВСГФ','ХВСГФШ') WHERE g.code = 'ГОСТ 5950-2000'
ON CONFLICT DO NOTHING;

-- Быстрорежущие
INSERT INTO gost_grade (gost_id, grade_id)
SELECT g.id, s.id FROM gost g JOIN steel_grade s ON s.name IN ('Р6М5','Р18','Р12','Р9','Р6М5К5','Р6М5Ф3','Р18Ф2','Р12Ф3','Р9Ф5','Р6М5К8','Р6М5Ф2К8') WHERE g.code = 'ГОСТ 19265-73'
ON CONFLICT DO NOTHING;

-- Чугуны
INSERT INTO gost_grade (gost_id, grade_id)
SELECT g.id, s.id FROM gost g JOIN steel_grade s ON s.name IN ('СЧ10','СЧ15','СЧ20','СЧ25','СЧ30','СЧ35','СЧ40','СЧ45','СЧ50','СЧ55','СЧ60') WHERE g.code = 'ГОСТ 1412-85'
ON CONFLICT DO NOTHING;

INSERT INTO gost_grade (gost_id, grade_id)
SELECT g.id, s.id FROM gost g JOIN steel_grade s ON s.name IN ('КЧ30','КЧ35','КЧ40','КЧ45','КЧ50','КЧ55','КЧ60','КЧ65','КЧ70','КЧ75','КЧ80') WHERE g.code = 'ГОСТ 1414-75'
ON CONFLICT DO NOTHING;

INSERT INTO gost_grade (gost_id, grade_id)
SELECT g.id, s.id FROM gost g JOIN steel_grade s ON s.name IN ('ВЧ35','ВЧ40','ВЧ45','ВЧ50','ВЧ60','ВЧ70','ВЧ80','ВЧ90','ВЧ100','ВЧ120','ВЧ140') WHERE g.code = 'ГОСТ 977-88'
ON CONFLICT DO NOTHING;

-- 4) СИСТЕМНЫЙ СКЛАД для metal
INSERT INTO warehouse (city, supplier)
SELECT 'Екатеринбург', 'SYSTEM'
WHERE NOT EXISTS (
    SELECT 1 FROM warehouse WHERE city = 'Екатеринбург' AND supplier = 'SYSTEM'
);

-- 5) БАЗОВЫЕ ПОЗИЦИИ МЕТАЛЛОПРОКАТА (примеры по всем категориям)
WITH sys_wh AS (
    SELECT id FROM warehouse WHERE city = 'Екатеринбург' AND supplier = 'SYSTEM' LIMIT 1
)
INSERT INTO metal (name, state_standard, category, stamp, diameter, thickness, width, length, material, price, unit, price_updated_at, comments, warehouse_id)
SELECT * FROM (
    VALUES
    -- Листовой прокат
    ('Лист горячекатаный', 'ГОСТ 19903-2015', 'листовой', 'Ст3сп', NULL, 3.0, 1000.0, 2000.0, 'Сталь', NULL, 'т', NOW(), 'Справочник', (SELECT id FROM sys_wh)),
    ('Лист горячекатаный', 'ГОСТ 19903-2015', 'листовой', '09Г2С', NULL, 5.0, 1500.0, 6000.0, 'Сталь', NULL, 'т', NOW(), 'Справочник', (SELECT id FROM sys_wh)),
    ('Лист холоднокатаный', 'ГОСТ 19904-2015', 'листовой', '08', NULL, 1.0, 1000.0, 2000.0, 'Сталь', NULL, 'т', NOW(), 'Справочник', (SELECT id FROM sys_wh)),
    ('Лист нержавеющий', 'ГОСТ 5632-2014', 'листовой', '12Х18Н10Т', NULL, 2.0, 1000.0, 2000.0, 'Нержавеющая сталь', NULL, 'т', NOW(), 'Справочник', (SELECT id FROM sys_wh)),
    
    -- Сортовой прокат
    ('Круг горячекатаный', 'ГОСТ 2590-2006', 'сортовой', '45', 20.0, NULL, NULL, 6000.0, 'Сталь', NULL, 'т', NOW(), 'Справочник', (SELECT id FROM sys_wh)),
    ('Круг горячекатаный', 'ГОСТ 2590-2006', 'сортовой', '40Х', 50.0, NULL, NULL, 6000.0, 'Сталь', NULL, 'т', NOW(), 'Справочник', (SELECT id FROM sys_wh)),
    ('Квадрат горячекатаный', 'ГОСТ 2591-2006', 'сортовой', 'Ст3сп', 20.0, NULL, NULL, 6000.0, 'Сталь', NULL, 'т', NOW(), 'Справочник', (SELECT id FROM sys_wh)),
    ('Шестигранник', 'ГОСТ 2879-2006', 'сортовой', '20', 16.0, NULL, NULL, 6000.0, 'Сталь', NULL, 'т', NOW(), 'Справочник', (SELECT id FROM sys_wh)),
    
    -- Фасонный прокат
    ('Уголок равнополочный', 'ГОСТ 8509-93', 'фасонный', 'Ст3сп', NULL, 4.0, 50.0, 6000.0, 'Сталь', NULL, 'т', NOW(), 'Справочник', (SELECT id FROM sys_wh)),
    ('Швеллер', 'ГОСТ 8240-97', 'фасонный', '09Г2С', NULL, 6.0, 100.0, 6000.0, 'Сталь', NULL, 'т', NOW(), 'Справочник', (SELECT id FROM sys_wh)),
    ('Двутавр', 'ГОСТ 8239-89', 'фасонный', 'Ст3сп', NULL, 8.0, 200.0, 6000.0, 'Сталь', NULL, 'т', NOW(), 'Справочник', (SELECT id FROM sys_wh)),
    
    -- Трубы
    ('Труба электросварная', 'ГОСТ 10704-91', 'трубный', 'Ст3сп', 57.0, 3.5, NULL, 6000.0, 'Сталь', NULL, 'т', NOW(), 'Справочник', (SELECT id FROM sys_wh)),
    ('Труба бесшовная', 'ГОСТ 8732-78', 'трубный', '20', 76.0, 4.0, NULL, 6000.0, 'Сталь', NULL, 'т', NOW(), 'Справочник', (SELECT id FROM sys_wh)),
    ('Труба квадратная', 'ГОСТ 8639-82', 'трубный', 'Ст3сп', 40.0, 2.0, 40.0, 6000.0, 'Сталь', NULL, 'т', NOW(), 'Справочник', (SELECT id FROM sys_wh)),
    
    -- Арматура
    ('Арматура периодическая', 'ГОСТ 5781-82', 'арматура', 'A500C', 12.0, NULL, NULL, 12000.0, 'Сталь', NULL, 'т', NOW(), 'Справочник', (SELECT id FROM sys_wh)),
    ('Арматура периодическая', 'ГОСТ 5781-82', 'арматура', 'A400', 16.0, NULL, NULL, 12000.0, 'Сталь', NULL, 'т', NOW(), 'Справочник', (SELECT id FROM sys_wh)),
    
    -- Цветные металлы
    ('Лист алюминиевый', 'ГОСТ 4784-2019', 'листовой', 'АД31', NULL, 2.0, 1000.0, 2000.0, 'Алюминий', NULL, 'т', NOW(), 'Справочник', (SELECT id FROM sys_wh)),
    ('Пруток медный', 'ГОСТ 1535-2016', 'сортовой', 'М1', 20.0, NULL, NULL, 6000.0, 'Медь', NULL, 'т', NOW(), 'Справочник', (SELECT id FROM sys_wh)),
    ('Лист латунный', 'ГОСТ 15527-2004', 'листовой', 'Л63', NULL, 1.0, 1000.0, 2000.0, 'Латунь', NULL, 'т', NOW(), 'Справочник', (SELECT id FROM sys_wh))
) AS v(name, state_standard, category, stamp, diameter, thickness, width, length, material, price, unit, price_updated_at, comments, warehouse_id)
WHERE NOT EXISTS (
    SELECT 1 FROM metal m
    WHERE m.name = v.name AND COALESCE(m.state_standard,'') = COALESCE(v.state_standard,'')
      AND COALESCE(m.category,'') = COALESCE(v.category,'') AND COALESCE(m.stamp,'') = COALESCE(v.stamp,'')
);

-- Конец миграции
